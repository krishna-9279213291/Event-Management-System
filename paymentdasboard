<!DOCTYPE html>
<html>
<head>
  <title>Event Payment</title>
</head>
<body>

<h2>Event Registration Payment</h2>
<button onclick="payNow()">Pay â‚¹500</button>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
async function payNow() {

  const orderRes = await fetch("http://localhost:5000/create-order", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ amount: 500 })
  });

  const order = await orderRes.json();

  const options = {
    key: "RAZORPAY_KEY_ID",
    amount: order.amount,
    currency: "INR",
    name: "Event Management System",
    description: "Event Registration Fee",
    order_id: order.id,
    handler: async function (response) {

      const verifyRes = await fetch("http://localhost:5000/verify-payment", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(response)
      });

      const result = await verifyRes.json();
      alert(result.message);
    }
  };

  const rzp = new Razorpay(options);
  rzp.open();
}
</script>

</body>
</html>
